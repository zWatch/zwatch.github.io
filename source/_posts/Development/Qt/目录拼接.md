# Qt正确的拼接跨平台文件路径

# 跨平台问题

- windows 的文件分隔符是 \ ，而 macOS 和 linux 的文件分隔符是 /
- windows 的路径有盘符，如 C:

## 情景一

已知 文件路径 和 文件名，拼接该文件的绝对路径

```C++
QString fileDir("C:\\test");
QString fileName("myfile.txt");
QDir dir(filePath);

QString absFilePath = dir.absoluteFilePath(fileName);
// absFilePath: C:/test/myfile.txt
123456
```

## 情景二

已知一个文件的绝对路径或相对路径，拼接同级目录的另一文件名（比如复制、文件名去重等操作）

```C++
QString filePath("C:\\test\myfile.txt");
QString otherFileName("myfle (1).txt");

QFileInfo fileInfo(filePath);
QDir dir(fileInfo.canonicalPath());

QString absFilePath = dir.absoluteFilePath(otherFileName);
// absFilePath: C:/test/myfile (1).txt
```